<!doctype html>
<html>

<head>
    <title>AppDynamics RUM and Analytics Injector</title>
    <link rel="stylesheet" href="jquery/jquery-ui.css">
    <link rel="stylesheet" href="options.css">
    <link rel="stylesheet" href="waitoverlay/jquery.wait-overlay.css">
    <script src="jquery/external/jquery/jquery.js"></script>
    <script src="jquery/jquery-ui.js"></script>
    <script src="chance.min.js"></script>
    <script src="options.js"></script>
    <script src="waitoverlay/jquery.wait-overlay.js"></script>
    <script src="ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace-builds/src-noconflict/ext-language_tools.js"></script>
</head>

<body>
    <br />

    <span class="headertitle">// The Monitoring Shop's <span class="headertitleaccent"> AppDynamics RUM and Analytics Injector</span></span>

    <br />
    <br />

    <button id="toggle" name="toggle" class="button headerbutton"><span id="status"></span></button>

    <br />
    <br />

	<div id="accordion">
		<h3>// Basic Settings</h3>
    <div class="tab">
        <label class="label" for="agentLocation">Agent Location</label>
        <br />
        <input type="text" title="For HTTPS locations without a valid certificate, you must first navigate to the location and accept the warning." name="agentLocation" id="agentLocation"/>
        <span id="agentLocationWarning" class="warning">Unable to connect to agent, please check agent location...</span>

        <br />
        <br />

        <label class="label" for="adrumAppKey">ADRUM App Key</label>
        <br />
        <input type="text" title="Leave empty if ADRUM App Key is included in the agent." name="adrumAppKey" id="adrumAppKey"/>

        <br />
        <br />

        <!--<label class="label" for="beaconLocationHttp">Beacon Location (HTTP)</label>
        <br />
        <input type="text" title="Beacon URL" name="beaconLocationHttp" id="beaconLocationHttp"/>

        <br />
        <br />

        <label class="label" for="beaconLocationHttps">Beacon Location (HTTPs)</label>
        <br />
        <input type="text" title="Beacon URL" name="beaconLocationHttps" id="beaconLocationHttps"/>

        <br />
        <br />

        <label class="label" for="geoServerLocation">Geo Server Location - Coming Soon!</label>
        <br />
        <input type="text" title="Geo Server URL" disabled="disabled" name="geoServerLocation" id="geoServerLocation"/>

        <br />
        <br />
-->


        <label class="label" for="urlFilter">URL filter (Contains)</label>
        <br />
        <input type="text" title="Filters URLs using 'contains' check. To match all URLs, leave empty." name="urlFilter" id="urlFilter"/>
        <br />
        <br />
        <button id="saveAgentSettings" name="saveAgentSettings" class="button">Save</button>
        &nbsp;
        <span id="agentSettingConfirm" class="confirmation">Saved!</span>
    </div>
    <h3>// Spoofing</h3>
    <div class="tab">
        <p>Spoof user agent and location. Leave empty if you do not wish to modify. This will only modify URI paths containing 'adrum'.</p>
        <label class="label" for="ua">User Agent String</label>
        <br />
        <input name="ua" id="ua" type="text" title="Hint: Use your own custom UA string or type '.' to get a sample list. Use '*' for random UA!" />
        <br />
        <br />
        <label class="label" for="geoLocation">Location IP</label>
        <br />
        <input name="geoLocation" id="geoLocation" type="text" title="Hint: Use your own custom IP address or type '.' to get a sample list. Use '*' for random IPs!" />
        <br />
        <br />
        <!--<label class="label" for="selectiveGeoLocation">Select Locations - Coming Soon!</label>
        <br />
        <input name="selectiveGeoLocation" id="selectiveGeoLocation" type="text" disabled="disabled" />
        <br />
        <br />-->
        <button id="saveSpoofing" name="saveSpoofing" class="button">Save</button>
        <span id="spoofingConfirm" class="confirmation">Saved!</span>
    </div>
    <h3>// Agent Advanced Configuration JS</h3>
    <div class="tab">
        <p>Agent configuration JS to be inserted before adrum.js. Use for increasing resource sampling, sending locations programatically, limiting XHR calls and more!<br /><br /><a href="https://docs.appdynamics.com/display/PRO45/Customize+the+JavaScript+Agent" target="_blank">Link To Docs</a></p>
        <p>
            The editor below supports auto completion and you can do a quick save with Ctrl+S (Linux/Windows) or Cmd+S (Mac)
        </p>
        <div style="display: flex">
            <div style="width: 70%">
                <label class="label" for="agentConfigJS">Agent Advanced Configuration JS</label>
                <textarea name="agentConfigJS" id="agentConfigJS" /></textarea>
            </div>
            <div style="width: 30%; margin-left: 4px;">
                <label class="label" for="agentConfigJSValidation">Config Preview</label>
                <textarea id="agentConfigJSValidation"></textarea>
            </div>
        </div>
        <br />
        <button id="loadSimpleConfig" name="loadSimpleConfig" title="Load a simple sample configuration into the editor">Load base config</button>
        <button id="loadAdvancedConfig" name="loadAdvancedConfig" title="Load an advanced sample configuration into the editor">Load advanced config</button>
        <br/>
        <p class="note">Wraps the above in &ltscript&gt tag.</p>
        <button id="saveAgentConfigJS" name="saveAgentConfigJS" class="button">Save</button>
        <button id="downloadAgentConfigJS" name="downloadAgentConfigJS" class="button">Download</button>
        <span id="agentConfigJSConfirm" class="confirmation">Saved!</span>
    </div>
    <h3>// Advanced</h3>
    <div class="tab">

            <button id="toggleCsp" name="toggleCsp" title="Override 'Content Security Policy' response header to allow ADRUM agent to load on sites where CSP policies prevent this." class="button"><span id="cspStatus"></span></button>
            <button id="toggleTao" name="toggleTao" title="Override 'Timing Allow Origin' response header to allow ADRUM agent to load details on all cross origin resource objects." class="button"><span id="taoStatus"></span></button>

            <br />
            <br />


            <button id="toggleAutoRefreshOnBeacon" name="toggleAutoRefreshOnBeacon"title="Auto refresh a website when a fixed number of beacons have been dispatched" class="button"><span id="autoRefreshOnBeaconStatus"></span></button>
            <input type="number" id="autoRefreshValue" min="1">
            <button id="saveAutoRefreshValue" name="saveAutoRefreshValue">Save</button>
            <span id="autoRefreshValueConfirm" class="confirmation"> - Saved!</span>

            <br />
            <br />

            <button id="resetSession" name="resetSession" title="Terminate the current session and start a new one!" class="button">Reset Session<span id="resetSessionConfirm" class="confirmation"> - Reset OK!</span></button>

    </div>
    </div>
</body>

</html>
